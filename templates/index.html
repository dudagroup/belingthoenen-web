{# Home Page #}
{% extends "_layout.html" %}
  
{% block content %}

{% set projects = craft.entries().section('projects').all() %}

<main class="main-carousel carousel">

  {% for project in projects %}
    <div class="carousel-cell">
      {% set aspectRatio = project.aspectRatio.options[0].selected %}
      {% if loop.first %} {# erstes Video abspielen #}
      <video src="{{ project.video[0].url }}" autoplay playsinline loop muted class="{{ aspectRatio ? 'square' : 'rect' }}">
      {% else %} {# erstes Video abspielen #}
      <video src="{{ project.video[0].url }}" paused playsinline loop muted class="{{ aspectRatio ? 'square' : 'rect' }}">
      {% endif %}
        Sorry, your browser doesn't support embedded videos, 
        but don't worry, you can <a href="{{ project.video[0].url }}">download it</a>
        and watch it with your favorite video player!
      </video>

      <div class="description hidden">
        {% if project.extLink|length %}
          <a href="{{ project.extLink }}" target="_blank">
            <img class="link" src="/assets/_pic/link.svg" width="44" height="44" alt="cute link button">
          </a>
        {% endif %}
        <img class="close" src="/assets/_pic/close.svg" width="44" height="44" alt="cute close button">
        <p><em>{{ project.title }}</em> {{ project.description }}</p>
      </div>
    </div>
  {% endfor %}

</main>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/marquee.js"></script>
<script src="/assets/js/flickity.js"></script>
<script src="/assets/js/initializeHomeFlickity.js"></script>
<script src="/assets/js/initializeArchiveFlickity.js"></script>
<script src="/assets/js/handleArrowButtons.js"></script>
<script src="/assets/js/project-info-reworked.js"></script>
<script src="/assets/js/handleArchiveEvents.js"></script>
{#<script src="/assets/js/lazy.js"></script>#} {# lazy load raus, wir starten & stoppen per carousel-event #}

<script>
  // Initialize Marquee
  $(function (){
    $('.simple-marquee-container').SimpleMarquee(
      {hover: false, duration: 40000}
    );
  });

</script>

{% endblock %}
